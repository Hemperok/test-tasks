1. Добавляем хэндлеры на изменение корзины (OnBasketAdd и OnBasketUpdate) и дальше работаем в них.
2. Объявляем переменные N, X и период работы акции.
3. Проверям - попадаем ли в период активности акции. Если нет - прекращаем выполнение функции.
4. Получаем массив товаров в корзине методом CSaleBasket::GetById()
5. Разбираем его согласно условию. Считаем количество всех товаров в корзине. Делим на N, берём целую часть деления. Ищем в массиве товаров столько(ту самую целую часть от деления) товаров с наименьшей стоимостью, сохраняем их ID.
6. Обновляем данные корзины с помощью CSaleBasket::Update, установив нужным товарам(из п.5) цену в размере X рублей.
